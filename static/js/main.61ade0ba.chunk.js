(this.webpackJsonphashdex=this.webpackJsonphashdex||[]).push([[0],{124:function(e,t,a){},125:function(e,t,a){"use strict";a.r(t);var l=a(36),s=a(75),o=a.n(s),r=a(112),n=a.n(r),i=a(113),c=a(114),d=a(108),u=a(116),v=a(115),m=(a(124),a(117)),h=a(74),b=a(61),p=a(118),g=function(e){Object(u.a)(a,e);var t=Object(v.a)(a);function a(e){var l;return Object(i.a)(this,a),(l=t.call(this,e)).sym="btcusdt",null!==localStorage.getItem?l.state={selectValue:localStorage.getItem("selected")}:l.state={selectValue:"BTC"},l.handleChange=l.handleChange.bind(Object(d.a)(l)),l}return Object(c.a)(a,[{key:"componentDidMount",value:function(){document.title="Hashdex",null!==this.state.selectValue&&(this.sym=this.state.selectValue.toLowerCase()+"usdt");var e=new WebSocket("wss://stream.binance.com:9443/ws/"+this.sym+"@trade"),t=new Request("https://api.hashdex.io/prod/marketdata/v1/index/HDAI/last"),a=new WebSocket("wss://stream.binance.com:9443/ws/"+this.sym+"@depth10");fetch(t).then((function(e){return e.json()})).then((function(e){for(var t=0;t<e.constituents.length;t++)document.getElementById("lista").innerHTML+=e.constituents[t].assetId+":    "+e.constituents[t].currentPrice+"<br>",document.getElementById("asset").innerHTML+="<option value="+e.constituents[t].assetId+">"+e.constituents[t].assetId+"</option>"}));var l=Object(m.a)(document.getElementById("chart"),{width:900,height:600,layout:{textColor:"#d1d4dc",backgroundColor:"#000000"},rightPriceScale:{scaleMargins:{top:.3,bottom:.25}},crosshair:{vertLine:{width:5,color:"rgba(224, 227, 235, 0.1)",style:0},horzLine:{visible:!1,labelVisible:!1}},grid:{vertLines:{color:"rgba(42, 46, 57, 0)"},horzLines:{color:"rgba(42, 46, 57, 0)"}}}).addAreaSeries({topColor:"rgba(38, 198, 218, 0.56)",bottomColor:"rgba(38, 198, 218, 0.04)",lineColor:"rgba(38, 198, 218, 1)",lineWidth:2,crossHairMarkerVisible:!1});e.onmessage=function(e){var t=JSON.parse(e.data);console.log(t.t),l.update({time:t.t/1e3,value:t.p})},h.c(p.a);var s=h.b("orderChart",b.e);s.dataSource.url="https://api.binance.com/api/v3/depth?symbol="+this.state.selectValue+"USDT&limit=100",s.dataSource.reloadFrequency=3e4,s.dataSource.adapter.add("parsedData",(function(e){function t(e,t,l){for(var s=0;s<e.length;s++)e[s]={value:Number(e[s][0]),volume:Number(e[s][1])};if(e.sort((function(e,t){return e.value>t.value?1:e.value<t.value?-1:0})),l)for(s=e.length-1;s>=0;s--){s<e.length-1?e[s].totalvolume=e[s+1].totalvolume+e[s].volume:e[s].totalvolume=e[s].volume,(o={}).value=e[s].value,o[t+"volume"]=e[s].volume,o[t+"totalvolume"]=e[s].totalvolume,a.unshift(o)}else for(s=0;s<e.length;s++){var o;e[s].totalvolume=s>0?e[s-1].totalvolume+e[s].volume:e[s].volume,(o={}).value=e[s].value,o[t+"volume"]=e[s].volume,o[t+"totalvolume"]=e[s].totalvolume,a.push(o)}}var a=[];return t(e.bids,"bids",!0),t(e.asks,"asks",!1),a})),s.numberFormatter.numberFormat="#,###.####";var o=s.xAxes.push(new b.a);o.dataFields.category="value",o.renderer.minGridDistance=70,null!==this.state.selectValue?o.title.text=this.state.selectValue.toUpperCase()+"/USDT":o.title.text="BTC/USDT",s.yAxes.push(new b.d).title.text="Volume";var r=s.series.push(new b.c);r.dataFields.categoryX="value",r.dataFields.valueY="bidstotalvolume",r.strokeWidth=2,r.stroke=h.a("#0f0"),r.fill=r.stroke,r.fillOpacity=.1,r.tooltipText="Bid: [bold]{categoryX}[/]\nTotal volume: [bold]{valueY}[/]\nVolume: [bold]{bidsvolume}[/]";var n=s.series.push(new b.c);n.dataFields.categoryX="value",n.dataFields.valueY="askstotalvolume",n.strokeWidth=2,n.stroke=h.a("#f00"),n.fill=n.stroke,n.fillOpacity=.1,n.tooltipText="Ask: [bold]{categoryX}[/]\nTotal volume: [bold]{valueY}[/]\nVolume: [bold]{asksvolume}[/]";var i=s.series.push(new b.b);i.dataFields.categoryX="value",i.dataFields.valueY="bidsvolume",i.strokeWidth=0,i.fill=h.a("#000"),i.fillOpacity=.2;var c=s.series.push(new b.b);c.dataFields.categoryX="value",c.dataFields.valueY="asksvolume",c.strokeWidth=0,c.fill=h.a("#000"),c.fillOpacity=.2,s.cursor=new b.f;var d=document.getElementById("buy"),u=document.getElementById("sell");a.onmessage=function(e){d.innerHTML="Buy<br>",u.innerHTML="Sell<br>";var t=JSON.parse(e.data);console.log(t);for(var a=0;a<10;a++)d.innerHTML+="Price: "+t.bids[a][0]+"          Volume: "+t.bids[a][1]+"<br>",u.innerHTML+="Price: "+t.asks[a][0]+"          Volume: "+t.asks[a][1]+"<br>"},a.onopen=function(e){console.log(e)},a.onerror=function(e){console.log(e.data)},a.onclose=function(e){1e3===e.code?console.log("WebSocket closed normally"):console.log("WebSocket closed unexpectedly: "+e.code)}}},{key:"handleChange",value:function(e){console.log("Asset selected"),this.setState({selectValue:e.target.value}),localStorage.setItem("selected",e.target.value),window.location.reload()}},{key:"render",value:function(){return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("h2",{children:"HashDex Dashboard"}),Object(l.jsxs)("div",{children:[Object(l.jsx)("select",{id:"asset",onChange:this.handleChange,children:Object(l.jsx)("option",{children:"Select"})}),Object(l.jsx)("h3",{children:localStorage.getItem("selected")})]}),Object(l.jsxs)("div",{className:"App-firstRow",children:[Object(l.jsx)("div",{id:"lista",className:"App-lista"}),Object(l.jsx)("div",{className:"App-chart",id:"chart"})]}),Object(l.jsxs)("div",{className:"App-secondRow",children:[Object(l.jsxs)("div",{id:"order",className:"App-order",children:["Asset:",localStorage.getItem("selected"),Object(l.jsx)("div",{id:"buy",className:"App-buy"}),Object(l.jsx)("div",{id:"sell",className:"App-sell"})]}),Object(l.jsx)("div",{id:"orderChart",className:"App-orderchart"})]})]})}}]),a}(s.Component);n.a.render(Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(g,{})}),document.getElementById("root"))}},[[125,1,4]]]);
//# sourceMappingURL=main.61ade0ba.chunk.js.map