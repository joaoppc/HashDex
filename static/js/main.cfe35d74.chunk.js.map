{"version":3,"sources":["App.js","index.js"],"names":["App","props","sym","state","selectValue","localStorage","getItem","handleChange","bind","this","toLowerCase","socketTrade","WebSocket","myRequest","Request","socketOrder","fetch","then","response","json","x","length","document","getElementById","innerHTML","areaSeries","createChart","width","height","layout","textColor","backgroundColor","rightPriceScale","scaleMargins","top","bottom","crosshair","vertLine","color","style","horzLine","visible","labelVisible","grid","vertLines","horzLines","addAreaSeries","topColor","bottomColor","lineColor","lineWidth","crossHairMarkerVisible","position","legend","createElement","classList","add","appendChild","firstRow","innerText","padding","margin","onmessage","event","object","JSON","parse","data","console","log","t","update","time","value","p","am4core","am4themes_animated","chart","am4charts","dataSource","url","reloadFrequency","adapter","processData","list","type","desc","i","Number","volume","sort","a","b","totalvolume","dp","res","unshift","push","bids","asks","numberFormatter","numberFormat","xAxis","xAxes","dataFields","category","renderer","minGridDistance","title","text","toUpperCase","yAxes","series","categoryX","valueY","strokeWidth","stroke","fill","fillOpacity","tooltipText","series2","series3","series4","cursor","buy","sell","order","onopen","onerror","onclose","code","e","setState","target","setItem","window","location","reload","className","id","onChange","Component","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.cfe35d74.chunk.js","sourcesContent":["import './App.css'; \nimport React, {Component} from 'react';\nimport { createChart } from 'lightweight-charts';\nimport * as am4core from \"@amcharts/amcharts4/core\";\nimport * as am4charts from \"@amcharts/amcharts4/charts\";\nimport am4themes_animated from \"@amcharts/amcharts4/themes/animated\";\n\n\n\n\n\n\nclass App extends Component{\n   constructor(props){\n    super(props);\n    this.sym='btcusdt';\n    this.state = {\n      selectValue: localStorage.getItem('selected'),\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    \n\n  }  \n  \n  componentDidMount(){\n\n    \n    if (this.state.selectValue !== null){\n      this.sym = this.state.selectValue.toLowerCase()+'usdt'\n    }\n    \n    const socketTrade = new WebSocket(\"wss://stream.binance.com:9443/ws/\"+this.sym+\"@trade\");\n    const myRequest = new Request('https://api.hashdex.io/prod/marketdata/v1/index/HDAI/last');\n    const socketOrder = new WebSocket(\"wss://stream.binance.com:9443/ws/\"+this.sym+\"@depth10\");\n    \n    \n\n    \n    \n    \n\n    /////Asset constituent/////\n    fetch(myRequest).then(response=>response.json()).then(json=>{\n      for(var x=0;x<json['constituents'].length;x++){\n      document.getElementById('lista').innerHTML += json['constituents'][x]['assetId']+':    '+json['constituents'][x]['currentPrice']+\"<br>\";\n      document.getElementById('asset').innerHTML +=\"<option value=\"+json['constituents'][x]['assetId']+'>'+json['constituents'][x]['assetId']+'</option>'\n\n      }  \n      \n      \n    });\n    \n    /* const chartO = createChart(document.getElementById('chart'), { width: 1800, height: 400 });\n    const lineSeries = chartO.addLineSeries(); */\n    var chartO = createChart(document.getElementById('chart'), {\n      width: 600,\n      height: 300,\n      layout: {\n        textColor: '#d1d4dc',\n        backgroundColor: '#000000',\n      },\n      rightPriceScale: {\n        scaleMargins: {\n          top: 0.3,\n          bottom: 0.25,\n        },\n      },\n      crosshair: {\n        vertLine: {\n          width: 5,\n          color: 'rgba(224, 227, 235, 0.1)',\n          style: 0,\n        },\n        horzLine: {\n          visible: false,\n          labelVisible: false,\n        },\n      },\n      grid: {\n        vertLines: {\n          color: 'rgba(42, 46, 57, 0)',\n        },\n        horzLines: {\n          color: 'rgba(42, 46, 57, 0)',\n        },\n      },\n    });\n    \n    var areaSeries = chartO.addAreaSeries({\n      topColor: 'rgba(38, 198, 218, 0.56)',\n      bottomColor: 'rgba(38, 198, 218, 0.04)',\n      lineColor: 'rgba(38, 198, 218, 1)',\n      lineWidth: 2,\n      crossHairMarkerVisible: false,\n    });\n    document.getElementById('chart').style.position = 'relative';\n\n    var legend = document.createElement('div');\n    legend.classList.add('legend');\n    \n    document.getElementById('chart').appendChild(legend);\n    var firstRow = document.createElement('div');\n    firstRow.innerText = this.state.selectValue+' USD ';\n    firstRow.style.color = 'white';\n    firstRow.style.padding='0px';\n    firstRow.style.margin='0px';\n    \n    legend.appendChild(firstRow);\n\n    \n\n    \n    socketTrade.onmessage = function (event) {\n      var object = JSON.parse(event.data);\n      console.log(object.t)\n      ///////////price chart///////////////////\n      areaSeries.update({\n        time: object.t/1000,\n        value: object.p\n      }); \n      ////////////////////////////////////////\n      \n    }\n\n\n    // Themes begin\n    am4core.useTheme(am4themes_animated);\n    // Themes end\n\n    // Create chart instance\n    var chart = am4core.create(\"orderChart\", am4charts.XYChart);\n    \n\n    // Add data\n    \n    chart.dataSource.url = \"https://api.binance.com/api/v3/depth?symbol=\"+this.state.selectValue+\"USDT&limit=100\";\n    //chart.dataSource.url = \"https://poloniex.com/public?command=returnOrderBook&currencyPair=USDT_\"+this.state.selectValue+\"&depth=50\";\n    chart.dataSource.reloadFrequency = 30000;\n    chart.dataSource.adapter.add(\"parsedData\", function(data) {\n      \n      // Function to process (sort and calculate cummulative volume)\n      function processData(list, type, desc) {\n\n        // Convert to data points\n        for(var i = 0; i < list.length; i++) {\n          list[i] = {\n            value: Number(list[i][0]),\n            volume: Number(list[i][1]),\n          }\n        }\n\n        // Sort list just in case\n        list.sort(function(a, b) {\n          if (a.value > b.value) {\n            return 1;\n          }\n          else if (a.value < b.value) {\n            return -1;\n          }\n          else {\n            return 0;\n          }\n        });\n\n        // Calculate cummulative volume\n        if (desc) {\n          for(var i = list.length - 1; i >= 0; i--) {\n            if (i < (list.length - 1)) {\n              list[i].totalvolume = list[i+1].totalvolume + list[i].volume;\n            }\n            else {\n              list[i].totalvolume = list[i].volume;\n            }\n            var dp = {};\n            dp[\"value\"] = list[i].value;\n            dp[type + \"volume\"] = list[i].volume;\n            dp[type + \"totalvolume\"] = list[i].totalvolume;\n            res.unshift(dp);\n          }\n        }\n        else {\n          for(var i = 0; i < list.length; i++) {\n            if (i > 0) {\n              list[i].totalvolume = list[i-1].totalvolume + list[i].volume;\n            }\n            else {\n              list[i].totalvolume = list[i].volume;\n            }\n            var dp = {};\n            dp[\"value\"] = list[i].value;\n            dp[type + \"volume\"] = list[i].volume;\n            dp[type + \"totalvolume\"] = list[i].totalvolume;\n            res.push(dp);\n          }\n        }\n\n      }\n\n      // Init\n      var res = [];\n      processData(data.bids, \"bids\", true);\n      processData(data.asks, \"asks\", false);\n\n      return res;\n    });\n\n    // Set up precision for numbers\n    chart.numberFormatter.numberFormat = \"#,###.####\";\n\n    // Create axes\n    var xAxis = chart.xAxes.push(new am4charts.CategoryAxis());\n    xAxis.dataFields.category = \"value\";\n    //xAxis.renderer.grid.template.location = 0;\n    xAxis.renderer.minGridDistance = 70;\n    if (this.state.selectValue !== null){\n      xAxis.title.text = this.state.selectValue.toUpperCase()+\"/USDT\";\n    }\n    else{\n      xAxis.title.text = \"BTC/USDT\"\n    }\n    \n\n    var yAxis = chart.yAxes.push(new am4charts.ValueAxis());\n    yAxis.title.text = \"Volume\";\n\n    // Create series\n    var series = chart.series.push(new am4charts.StepLineSeries());\n    series.dataFields.categoryX = \"value\";\n    series.dataFields.valueY = \"bidstotalvolume\";\n    series.strokeWidth = 2;\n    series.stroke = am4core.color(\"#0f0\");\n    series.fill = series.stroke;\n    series.fillOpacity = 0.1;\n    series.tooltipText = \"Bid: [bold]{categoryX}[/]\\nTotal volume: [bold]{valueY}[/]\\nVolume: [bold]{bidsvolume}[/]\"\n\n    var series2 = chart.series.push(new am4charts.StepLineSeries());\n    series2.dataFields.categoryX = \"value\";\n    series2.dataFields.valueY = \"askstotalvolume\";\n    series2.strokeWidth = 2;\n    series2.stroke = am4core.color(\"#f00\");\n    series2.fill = series2.stroke;\n    series2.fillOpacity = 0.1;\n    series2.tooltipText = \"Ask: [bold]{categoryX}[/]\\nTotal volume: [bold]{valueY}[/]\\nVolume: [bold]{asksvolume}[/]\"\n\n    var series3 = chart.series.push(new am4charts.ColumnSeries());\n    series3.dataFields.categoryX = \"value\";\n    series3.dataFields.valueY = \"bidsvolume\";\n    series3.strokeWidth = 0;\n    series3.fill = am4core.color(\"#000\");\n    series3.fillOpacity = 0.2;\n\n    var series4 = chart.series.push(new am4charts.ColumnSeries());\n    series4.dataFields.categoryX = \"value\";\n    series4.dataFields.valueY = \"asksvolume\";\n    series4.strokeWidth = 0;\n    series4.fill = am4core.color(\"#000\");\n    series4.fillOpacity = 0.2;\n\n    // Add cursor\n    chart.cursor = new am4charts.XYCursor(); \n\n\n\n////////////////////////////////////////////////////////////////////////////////////////\n\n    var buy = document.getElementById('buy');\n    var sell = document.getElementById('sell');\n    socketOrder.onmessage = function (event) {\n      buy.innerHTML = 'Buy<br>';\n      sell.innerHTML = 'Sell<br>';\n      var order = JSON.parse(event.data);\n      console.log(order)\n\n      for (let i = 0; i < 10; i++) {\n        buy.innerHTML +=\"Price: \"+ order.bids[i][0]+\"          Volume: \"+order.bids[i][1]+\"<br>\";\n        sell.innerHTML +=\"Price: \"+ order.asks[i][0]+\"          Volume: \"+order.asks[i][1]+\"<br>\";\n      }\n     \n    }\n    socketOrder.onopen = function(event){\n      console.log(event);\n    }\n    socketOrder.onerror = function (event) {\n      console.log(event.data);\n   };\n   socketOrder.onclose = function(event) {\n    if (event.code === 1000) {\n      console.log('WebSocket closed normally');\n    } else {\n        console.log('WebSocket closed unexpectedly: ' + event.code);\n    }\n  }\n   \n\n  }\n\n\n  \n  handleChange(e) {\n    console.log(\"Asset selected\");\n    this.setState({ selectValue: e.target.value });\n    localStorage.setItem('selected', e.target.value)\n    window.location.reload();\n  }\n  render() {\n    return(\n      <div className=\"App\">\n      <h2>\n        HashDex Dashboard\n      </h2>\n      <div>\n      \n        <select id = 'asset' onChange={this.handleChange}>\n          <option>Select</option>  \n          \n\n        </select>\n        <h3>{localStorage.getItem('selected')}</h3>\n      </div>\n      <div id='lista' className='App-lista'>\n      </div>\n      <div id ='order' className ='App-order'>\n        Asset:{localStorage.getItem('selected')}\n        <div id = 'buy' className = 'App-buy' ></div>\n        <div id = 'sell' className = 'App-sell'></div>\n        \n      </div>\n      <div className='App-chart' id='chart'>\n\n      </div>\n      <div id = 'orderChart' className='App-orderchart'>\n        \n      </div>\n      \n    </div>\n\n    );\n  }\n}\n\n\n\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}