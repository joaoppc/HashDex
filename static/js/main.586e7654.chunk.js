(this.webpackJsonphashdex=this.webpackJsonphashdex||[]).push([[0],{124:function(e,t,a){},125:function(e,t,a){"use strict";a.r(t);var l=a(44),s=a(75),o=a.n(s),n=a(112),r=a.n(n),c=a(113),i=a(114),u=a(108),d=a(116),v=a(115),m=(a(124),a(117)),h=a(74),b=a(61),p=a(118),g=function(e){Object(d.a)(a,e);var t=Object(v.a)(a);function a(e){var l;return Object(c.a)(this,a),(l=t.call(this,e)).sym="btcusdt",l.state={selectValue:localStorage.getItem("selected")},l.handleChange=l.handleChange.bind(Object(u.a)(l)),l}return Object(i.a)(a,[{key:"componentDidMount",value:function(){null!==this.state.selectValue&&(this.sym=this.state.selectValue.toLowerCase()+"usdt");var e=new WebSocket("wss://stream.binance.com:9443/ws/"+this.sym+"@trade"),t=new Request("https://api.hashdex.io/prod/marketdata/v1/index/HDAI/last"),a=new WebSocket("wss://stream.binance.com:9443/ws/"+this.sym+"@depth10");fetch(t).then((function(e){return e.json()})).then((function(e){for(var t=0;t<e.constituents.length;t++)document.getElementById("lista").innerHTML+=e.constituents[t].assetId+":    "+e.constituents[t].currentPrice+"<br>",document.getElementById("asset").innerHTML+="<option value="+e.constituents[t].assetId+">"+e.constituents[t].assetId+"</option>"}));var l=Object(m.a)(document.getElementById("chart"),{width:1800,height:400}).addLineSeries();e.onmessage=function(e){var t=JSON.parse(e.data);console.log(t),l.update({time:t.t,value:t.p})},h.c(p.a);var s=h.b("orderChart",b.e);s.dataSource.url="https://poloniex.com/public?command=returnOrderBook&currencyPair=USDT_"+this.state.selectValue+"&depth=50",s.dataSource.reloadFrequency=3e4,s.dataSource.adapter.add("parsedData",(function(e){function t(e,t,l){for(var s=0;s<e.length;s++)e[s]={value:Number(e[s][0]),volume:Number(e[s][1])};if(e.sort((function(e,t){return e.value>t.value?1:e.value<t.value?-1:0})),l)for(s=e.length-1;s>=0;s--){s<e.length-1?e[s].totalvolume=e[s+1].totalvolume+e[s].volume:e[s].totalvolume=e[s].volume,(o={}).value=e[s].value,o[t+"volume"]=e[s].volume,o[t+"totalvolume"]=e[s].totalvolume,a.unshift(o)}else for(s=0;s<e.length;s++){var o;e[s].totalvolume=s>0?e[s-1].totalvolume+e[s].volume:e[s].volume,(o={}).value=e[s].value,o[t+"volume"]=e[s].volume,o[t+"totalvolume"]=e[s].totalvolume,a.push(o)}}var a=[];return t(e.bids,"bids",!0),t(e.asks,"asks",!1),a})),s.numberFormatter.numberFormat="#,###.####";var o=s.xAxes.push(new b.a);o.dataFields.category="value",o.renderer.minGridDistance=100,null!==this.state.selectValue?o.title.text=this.state.selectValue.toUpperCase()+"/USDT":o.title.text="BTC/USDT",s.yAxes.push(new b.d).title.text="Volume";var n=s.series.push(new b.c);n.dataFields.categoryX="value",n.dataFields.valueY="bidstotalvolume",n.strokeWidth=2,n.stroke=h.a("#0f0"),n.fill=n.stroke,n.fillOpacity=.1,n.tooltipText="Ask: [bold]{categoryX}[/]\nTotal volume: [bold]{valueY}[/]\nVolume: [bold]{bidsvolume}[/]";var r=s.series.push(new b.c);r.dataFields.categoryX="value",r.dataFields.valueY="askstotalvolume",r.strokeWidth=2,r.stroke=h.a("#f00"),r.fill=r.stroke,r.fillOpacity=.1,r.tooltipText="Ask: [bold]{categoryX}[/]\nTotal volume: [bold]{valueY}[/]\nVolume: [bold]{asksvolume}[/]";var c=s.series.push(new b.b);c.dataFields.categoryX="value",c.dataFields.valueY="bidsvolume",c.strokeWidth=0,c.fill=h.a("#000"),c.fillOpacity=.2;var i=s.series.push(new b.b);i.dataFields.categoryX="value",i.dataFields.valueY="asksvolume",i.strokeWidth=0,i.fill=h.a("#000"),i.fillOpacity=.2,s.cursor=new b.f;var u=document.getElementById("buy"),d=document.getElementById("sell");a.onmessage=function(e){u.innerHTML="Buy<br>",d.innerHTML="Sell<br>";var t=JSON.parse(e.data);console.log(t);for(var a=0;a<10;a++)u.innerHTML+="Price: "+t.bids[a][0]+"          Volume: "+t.bids[a][1]+"<br>",d.innerHTML+="Price: "+t.asks[a][0]+"          Volume: "+t.asks[a][1]+"<br>"},a.onopen=function(e){console.log(e)},a.onerror=function(e){console.log(e.data)},a.onclose=function(e){1e3===e.code?console.log("WebSocket closed normally"):console.log("WebSocket closed unexpectedly: "+e.code)}}},{key:"handleChange",value:function(e){console.log("Asset selected"),this.setState({selectValue:e.target.value}),localStorage.setItem("selected",e.target.value),window.location.reload()}},{key:"render",value:function(){return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("h2",{children:"HashDex Dashboard"}),Object(l.jsxs)("div",{children:[localStorage.getItem("selected"),Object(l.jsx)("select",{id:"asset",onChange:this.handleChange,children:Object(l.jsx)("option",{children:"Select"})})]}),Object(l.jsx)("div",{id:"lista",className:"App-lista"}),Object(l.jsxs)("div",{id:"order",className:"App-order",children:["Asset:",localStorage.getItem("selected"),Object(l.jsx)("div",{id:"buy"}),Object(l.jsx)("div",{id:"sell"})]}),Object(l.jsx)("div",{className:"App-chart",id:"chart"}),Object(l.jsx)("div",{id:"orderChart",className:"App-orderchart"})]})}}]),a}(s.Component);r.a.render(Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(g,{})}),document.getElementById("root"))}},[[125,1,4]]]);
//# sourceMappingURL=main.586e7654.chunk.js.map