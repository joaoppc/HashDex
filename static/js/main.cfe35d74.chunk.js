(this.webpackJsonphashdex=this.webpackJsonphashdex||[]).push([[0],{124:function(e,t,a){},125:function(e,t,a){"use strict";a.r(t);var l=a(42),s=a(75),o=a.n(s),n=a(112),r=a.n(n),i=a(113),c=a(114),d=a(108),u=a(116),m=a(115),v=(a(124),a(117)),h=a(74),b=a(61),p=a(118),g=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var l;return Object(i.a)(this,a),(l=t.call(this,e)).sym="btcusdt",l.state={selectValue:localStorage.getItem("selected")},l.handleChange=l.handleChange.bind(Object(d.a)(l)),l}return Object(c.a)(a,[{key:"componentDidMount",value:function(){null!==this.state.selectValue&&(this.sym=this.state.selectValue.toLowerCase()+"usdt");var e=new WebSocket("wss://stream.binance.com:9443/ws/"+this.sym+"@trade"),t=new Request("https://api.hashdex.io/prod/marketdata/v1/index/HDAI/last"),a=new WebSocket("wss://stream.binance.com:9443/ws/"+this.sym+"@depth10");fetch(t).then((function(e){return e.json()})).then((function(e){for(var t=0;t<e.constituents.length;t++)document.getElementById("lista").innerHTML+=e.constituents[t].assetId+":    "+e.constituents[t].currentPrice+"<br>",document.getElementById("asset").innerHTML+="<option value="+e.constituents[t].assetId+">"+e.constituents[t].assetId+"</option>"}));var l=Object(v.a)(document.getElementById("chart"),{width:600,height:300,layout:{textColor:"#d1d4dc",backgroundColor:"#000000"},rightPriceScale:{scaleMargins:{top:.3,bottom:.25}},crosshair:{vertLine:{width:5,color:"rgba(224, 227, 235, 0.1)",style:0},horzLine:{visible:!1,labelVisible:!1}},grid:{vertLines:{color:"rgba(42, 46, 57, 0)"},horzLines:{color:"rgba(42, 46, 57, 0)"}}}).addAreaSeries({topColor:"rgba(38, 198, 218, 0.56)",bottomColor:"rgba(38, 198, 218, 0.04)",lineColor:"rgba(38, 198, 218, 1)",lineWidth:2,crossHairMarkerVisible:!1});document.getElementById("chart").style.position="relative";var s=document.createElement("div");s.classList.add("legend"),document.getElementById("chart").appendChild(s);var o=document.createElement("div");o.innerText=this.state.selectValue+" USD ",o.style.color="white",o.style.padding="0px",o.style.margin="0px",s.appendChild(o),e.onmessage=function(e){var t=JSON.parse(e.data);console.log(t.t),l.update({time:t.t/1e3,value:t.p})},h.c(p.a);var n=h.b("orderChart",b.e);n.dataSource.url="https://api.binance.com/api/v3/depth?symbol="+this.state.selectValue+"USDT&limit=100",n.dataSource.reloadFrequency=3e4,n.dataSource.adapter.add("parsedData",(function(e){function t(e,t,l){for(var s=0;s<e.length;s++)e[s]={value:Number(e[s][0]),volume:Number(e[s][1])};if(e.sort((function(e,t){return e.value>t.value?1:e.value<t.value?-1:0})),l)for(s=e.length-1;s>=0;s--){s<e.length-1?e[s].totalvolume=e[s+1].totalvolume+e[s].volume:e[s].totalvolume=e[s].volume,(o={}).value=e[s].value,o[t+"volume"]=e[s].volume,o[t+"totalvolume"]=e[s].totalvolume,a.unshift(o)}else for(s=0;s<e.length;s++){var o;e[s].totalvolume=s>0?e[s-1].totalvolume+e[s].volume:e[s].volume,(o={}).value=e[s].value,o[t+"volume"]=e[s].volume,o[t+"totalvolume"]=e[s].totalvolume,a.push(o)}}var a=[];return t(e.bids,"bids",!0),t(e.asks,"asks",!1),a})),n.numberFormatter.numberFormat="#,###.####";var r=n.xAxes.push(new b.a);r.dataFields.category="value",r.renderer.minGridDistance=70,null!==this.state.selectValue?r.title.text=this.state.selectValue.toUpperCase()+"/USDT":r.title.text="BTC/USDT",n.yAxes.push(new b.d).title.text="Volume";var i=n.series.push(new b.c);i.dataFields.categoryX="value",i.dataFields.valueY="bidstotalvolume",i.strokeWidth=2,i.stroke=h.a("#0f0"),i.fill=i.stroke,i.fillOpacity=.1,i.tooltipText="Bid: [bold]{categoryX}[/]\nTotal volume: [bold]{valueY}[/]\nVolume: [bold]{bidsvolume}[/]";var c=n.series.push(new b.c);c.dataFields.categoryX="value",c.dataFields.valueY="askstotalvolume",c.strokeWidth=2,c.stroke=h.a("#f00"),c.fill=c.stroke,c.fillOpacity=.1,c.tooltipText="Ask: [bold]{categoryX}[/]\nTotal volume: [bold]{valueY}[/]\nVolume: [bold]{asksvolume}[/]";var d=n.series.push(new b.b);d.dataFields.categoryX="value",d.dataFields.valueY="bidsvolume",d.strokeWidth=0,d.fill=h.a("#000"),d.fillOpacity=.2;var u=n.series.push(new b.b);u.dataFields.categoryX="value",u.dataFields.valueY="asksvolume",u.strokeWidth=0,u.fill=h.a("#000"),u.fillOpacity=.2,n.cursor=new b.f;var m=document.getElementById("buy"),g=document.getElementById("sell");a.onmessage=function(e){m.innerHTML="Buy<br>",g.innerHTML="Sell<br>";var t=JSON.parse(e.data);console.log(t);for(var a=0;a<10;a++)m.innerHTML+="Price: "+t.bids[a][0]+"          Volume: "+t.bids[a][1]+"<br>",g.innerHTML+="Price: "+t.asks[a][0]+"          Volume: "+t.asks[a][1]+"<br>"},a.onopen=function(e){console.log(e)},a.onerror=function(e){console.log(e.data)},a.onclose=function(e){1e3===e.code?console.log("WebSocket closed normally"):console.log("WebSocket closed unexpectedly: "+e.code)}}},{key:"handleChange",value:function(e){console.log("Asset selected"),this.setState({selectValue:e.target.value}),localStorage.setItem("selected",e.target.value),window.location.reload()}},{key:"render",value:function(){return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("h2",{children:"HashDex Dashboard"}),Object(l.jsxs)("div",{children:[Object(l.jsx)("select",{id:"asset",onChange:this.handleChange,children:Object(l.jsx)("option",{children:"Select"})}),Object(l.jsx)("h3",{children:localStorage.getItem("selected")})]}),Object(l.jsx)("div",{id:"lista",className:"App-lista"}),Object(l.jsxs)("div",{id:"order",className:"App-order",children:["Asset:",localStorage.getItem("selected"),Object(l.jsx)("div",{id:"buy",className:"App-buy"}),Object(l.jsx)("div",{id:"sell",className:"App-sell"})]}),Object(l.jsx)("div",{className:"App-chart",id:"chart"}),Object(l.jsx)("div",{id:"orderChart",className:"App-orderchart"})]})}}]),a}(s.Component);r.a.render(Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(g,{})}),document.getElementById("root"))}},[[125,1,4]]]);
//# sourceMappingURL=main.cfe35d74.chunk.js.map